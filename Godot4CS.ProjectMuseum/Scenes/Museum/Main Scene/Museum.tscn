[gd_scene load_steps=41 format=3 uid="uid://bclpm0kveaxk6"]

[ext_resource type="Script" path="res://Scripts/Museum/Museum.cs" id="1_3ql1b"]
[ext_resource type="PackedScene" uid="uid://dxtfargoq8wot" path="res://Scenes/Museum/Sub Scenes/Tilemap.tscn" id="2_2v5tj"]
[ext_resource type="PackedScene" uid="uid://baf5s8ygn03sp" path="res://Scenes/Museum/Town/town.tscn" id="2_pnteo"]
[ext_resource type="Script" path="res://Scenes/Museum/Main Scene/MuseumSceneDiInstaller.cs" id="2_yr8uh"]
[ext_resource type="Script" path="res://Scripts/Museum/TileSpawner.cs" id="3_txjx3"]
[ext_resource type="Script" path="res://Scripts/Museum/CameraPanAndZoom.cs" id="4_kytf8"]
[ext_resource type="PackedScene" uid="uid://0v3ikej83pig" path="res://Scenes/Museum/Sub Scenes/Walls/left_wall.tscn" id="6_plrwf"]
[ext_resource type="Texture2D" uid="uid://cuongtmbiiass" path="res://Assets/2D/Sprites/Wallpapers/1.png" id="7_5wxpw"]
[ext_resource type="PackedScene" uid="uid://bpare5kqece4c" path="res://Scenes/Museum/Museum Ui/Museum ui.tscn" id="7_xsnwb"]
[ext_resource type="Texture2D" uid="uid://c5gblrdjxy4i3" path="res://Assets/2D/Sprites/Wallpapers/2.png" id="8_s5qaf"]
[ext_resource type="Texture2D" uid="uid://cfnplqomkdo4p" path="res://Assets/2D/Sprites/Wallpapers/3.png" id="9_bhbr7"]
[ext_resource type="Texture2D" uid="uid://bt8tovq0knruf" path="res://Assets/2D/Sprites/Wallpapers/4 .png" id="9_qrxw8"]
[ext_resource type="Texture2D" uid="uid://ddxt3f2qki8xr" path="res://Assets/2D/Sprites/Wallpapers/5.png" id="10_02o80"]
[ext_resource type="PackedScene" uid="uid://bjy2gyknf1lwq" path="res://Scenes/Museum/Museum Ui/Exhibit Editor Ui.tscn" id="10_c21vt"]
[ext_resource type="PackedScene" uid="uid://ddq1yn1fawuwg" path="res://Scenes/Museum/Sub Scenes/Walls/right_wall.tscn" id="10_xt14w"]
[ext_resource type="Script" path="res://Scripts/Museum/MuseumTileEditor.cs" id="11_uydor"]
[ext_resource type="PackedScene" uid="uid://c25gv63c04sp4" path="res://Scenes/Museum/Sub Scenes/MainCharacter.tscn" id="12_55fh7"]
[ext_resource type="PackedScene" uid="uid://bypida1m5guj5" path="res://Scenes/Museum/Museum Ui/Builder Ui/Builder Card.tscn" id="12_730rj"]
[ext_resource type="Script" path="res://Scripts/Museum/ExhibitController.cs" id="12_k33tk"]
[ext_resource type="PackedScene" uid="uid://crl7j8x5ieqw" path="res://Scenes/Museum/Museum Ui/dialogue_ui.tscn" id="13_bch1s"]
[ext_resource type="PackedScene" uid="uid://bwlwmmvr5vtvc" path="res://Scenes/Museum/Museum Ui/pop_up_ui.tscn" id="13_k824c"]
[ext_resource type="PackedScene" uid="uid://b4h8rdtln0hvn" path="res://Scenes/Museum/Sub Scenes/Guest.tscn" id="17_4it67"]
[ext_resource type="Script" path="res://Scripts/Museum/GuestScripts/GuestsController.cs" id="18_iea1i"]
[ext_resource type="Script" path="res://Scripts/Museum/ManualSorting.cs" id="18_rds1y"]
[ext_resource type="PackedScene" uid="uid://b5hoveiehnseh" path="res://Scenes/Museum/Sub Scenes/Player_Uncontrolled.tscn" id="19_1kq7h"]
[ext_resource type="PackedScene" uid="uid://dj4qpmv17d2tv" path="res://Scenes/Museum/Sub Scenes/Professor.tscn" id="19_yibo3"]
[ext_resource type="Texture2D" uid="uid://cpinyxd6v3m0g" path="res://Assets/2D/Sprites/Doors/entry gate old.png" id="21_6abge"]
[ext_resource type="Texture2D" uid="uid://bqayq51aokdnh" path="res://Assets/2D/Sprites/Backgrounds/isomatric forest chunk.png" id="23_38mdj"]
[ext_resource type="Script" path="res://Scripts/Museum/Controllers/WallController.cs" id="23_md2ii"]
[ext_resource type="Script" path="res://Plugins/Time System/MuseumTimeSystem/Scripts/MuseumTimeSystem.cs" id="24_wpojy"]
[ext_resource type="Script" path="res://Scripts/Museum/SaveGame.cs" id="25_nktge"]
[ext_resource type="Script" path="res://Scripts/Museum/MuseumBalanceController.cs" id="26_vw67d"]
[ext_resource type="Script" path="res://Scripts/Museum/Controllers/DayEndController.cs" id="27_mm5mn"]
[ext_resource type="Script" path="res://Scripts/Museum/Controllers/StoryController.cs" id="29_6vdgp"]
[ext_resource type="Texture2D" uid="uid://dsii5p1yni3e2" path="res://Assets/2D/Sprites/Backgrounds/Road Chunks/ROAD CHUNK.png" id="30_wqv7k"]
[ext_resource type="Script" path="res://Scripts/Museum/Tutorial System/TutorialSystem.cs" id="33_vs3ci"]
[ext_resource type="Script" path="res://Scripts/Museum/Controllers/StoryCharacterController.cs" id="34_r65mj"]
[ext_resource type="Script" path="res://Scripts/Museum/Controllers/TownController.cs" id="37_vwmma"]
[ext_resource type="Texture2D" uid="uid://cr7kq2627afbv" path="res://Assets/2D/Sprites/Backgrounds/Road Chunks/ROAD CHUNK 2.png" id="39_edsxa"]
[ext_resource type="Texture2D" uid="uid://bs6uu5d0ajyol" path="res://Assets/2D/Sprites/Backgrounds/Road Chunks/ROAD CHUNK 3.png" id="40_5qu8p"]

[node name="Museum Scene Di Installer" type="Node"]
script = ExtResource("2_yr8uh")

[node name="museum" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("1_3ql1b")

[node name="TileMap" parent="museum" node_paths=PackedStringArray("_wallsParent") instance=ExtResource("2_2v5tj")]
layer_0/tile_data = PackedInt32Array()
script = ExtResource("3_txjx3")
_wallRight = ExtResource("10_xt14w")
_wallLeft = ExtResource("6_plrwf")
_dirtyWallProbability = 0
_dirtyWallTextures = Array[Texture2D]([ExtResource("7_5wxpw"), ExtResource("8_s5qaf"), ExtResource("9_bhbr7"), ExtResource("9_qrxw8"), ExtResource("10_02o80")])
_wallsParent = NodePath("../WallsParent")

[node name="Camera2D" type="Camera2D" parent="museum"]
position = Vector2(50, -210)
script = ExtResource("4_kytf8")
zoomSpd = 0.2
Minzoom = 1.0
Maxzoom = 2.0

[node name="CanvasLayer" type="CanvasLayer" parent="museum"]

[node name="Town Ui" parent="museum/CanvasLayer" instance=ExtResource("2_pnteo")]

[node name="Musseum Ui" parent="museum/CanvasLayer" node_paths=PackedStringArray("ItemsParent") instance=ExtResource("7_xsnwb")]
ItemsParent = NodePath("../../ItemParents")

[node name="Exhibit Editor Ui" parent="museum/CanvasLayer" instance=ExtResource("10_c21vt")]
visible = false

[node name="Control" parent="museum/CanvasLayer" instance=ExtResource("12_730rj")]
process_mode = 4
visible = false
offset_bottom = -50.0

[node name="Dialogue Ui" parent="museum/CanvasLayer" instance=ExtResource("13_bch1s")]
visible = false
mouse_filter = 2

[node name="PopUpUi" parent="museum/CanvasLayer" instance=ExtResource("13_k824c")]
visible = false

[node name="Player" parent="museum" instance=ExtResource("12_55fh7")]
position = Vector2(55, -11)
_displacementSpeed = 50.0

[node name="Player_Uncontrolled" parent="museum" instance=ExtResource("19_1kq7h")]
visible = false
position = Vector2(50, -6)
_professorEnteringCoordinates = Array[Vector2i]([Vector2i(-5, -3), Vector2i(-5, -4)])
_museumExitingCoordinate = Vector2i(0, -2)
_animationNameAfterInitialMovement = "idle_back_facing"

[node name="Professor" parent="museum" instance=ExtResource("19_yibo3")]
visible = false
position = Vector2(40, -14)
_professorEnteringCoordinates = Array[Vector2i]([Vector2i(-5, -3), Vector2i(-5, -6)])
_animationNameAfterInitialMovement = "idle_front_facing"
_lookAheadDistance = 1.0

[node name="GuestsController" type="Node2D" parent="museum"]
y_sort_enabled = true
script = ExtResource("18_iea1i")
_guestScene = ExtResource("17_4it67")
_spawnAtTile = Vector2i(0, -2)

[node name="ItemParents" type="Node2D" parent="museum"]
y_sort_enabled = true

[node name="WallsParent" type="Node2D" parent="museum"]
y_sort_enabled = true
script = ExtResource("23_md2ii")

[node name="MuseumTileEditor" type="Node2D" parent="museum"]
y_sort_enabled = true
script = ExtResource("11_uydor")
_tileSourceId = 5

[node name="ExhibitController" type="Node2D" parent="museum" node_paths=PackedStringArray("_exhibitEditorUi", "_itemsParent")]
script = ExtResource("12_k33tk")
_exhibitEditorUi = NodePath("../CanvasLayer/Exhibit Editor Ui")
_itemsParent = NodePath("../ItemParents")

[node name="ManualSorting" type="Node2D" parent="museum"]
script = ExtResource("18_rds1y")

[node name="EntryGateOld" type="Sprite2D" parent="museum"]
z_index = 1
texture_filter = 1
position = Vector2(58, 1)
texture = ExtResource("21_6abge")
offset = Vector2(0, -32.5)

[node name="Background Foresnt" type="Node2D" parent="museum"]
z_index = -1
y_sort_enabled = true

[node name="IsomatricForestChunk" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(359.285, -334.5)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk2" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(-243, -315.955)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk3" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(76, -478)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk8" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(127, -787)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk6" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(694, -502)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk7" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(414, -645.5)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk4" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(-532, -459.955)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk5" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(-206.715, -621.5)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk9" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(-161, -931.5)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk12" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(464, -955)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk13" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(1031, -669)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk14" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(751, -813.5)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk15" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(176, -1099.5)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk10" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(-820, -604.455)
texture = ExtResource("23_38mdj")

[node name="IsomatricForestChunk11" type="Sprite2D" parent="museum/Background Foresnt"]
texture_filter = 1
position = Vector2(-494.715, -766)
texture = ExtResource("23_38mdj")

[node name="Road" type="Node2D" parent="museum"]

[node name="RoadChunk2" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(-398, -47)
texture = ExtResource("39_edsxa")

[node name="RoadChunk4" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(-732, -214)
texture = ExtResource("39_edsxa")

[node name="RoadChunk5" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(-1062, -378)
texture = ExtResource("39_edsxa")

[node name="RoadChunk3" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(16, 135)
texture = ExtResource("40_5qu8p")

[node name="RoadChunk" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(431, -47)
texture = ExtResource("30_wqv7k")

[node name="RoadChunk6" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(767, -216)
texture = ExtResource("30_wqv7k")

[node name="RoadChunk7" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(1105, -384)
texture = ExtResource("30_wqv7k")

[node name="RoadChunk8" type="Sprite2D" parent="museum/Road"]
texture_filter = 1
position = Vector2(1441, -553)
texture = ExtResource("30_wqv7k")

[node name="Museum Time System" type="Node2D" parent="."]
script = ExtResource("24_wpojy")

[node name="SaveGame" type="Node2D" parent="."]
script = ExtResource("25_nktge")

[node name="Musuem Balance Controller" type="Node2D" parent="."]
script = ExtResource("26_vw67d")

[node name="DayEndController" type="Node2D" parent="."]
script = ExtResource("27_mm5mn")
_dayEndTileCoord = Vector2i(0, -1)

[node name="StoryController" type="Node2D" parent="."]
process_mode = 4
script = ExtResource("29_6vdgp")

[node name="TutorialSystem" type="Node2D" parent="."]
script = ExtResource("33_vs3ci")

[node name="StoryCharacterController" type="Node2D" parent="." node_paths=PackedStringArray("_storyPlayer", "_storyProfessor", "_gameCharacter")]
script = ExtResource("34_r65mj")
_storyPlayer = NodePath("../museum/Player_Uncontrolled")
_storyProfessor = NodePath("../museum/Professor")
_gameCharacter = NodePath("../museum/Player")

[node name="TownController" type="Node2D" parent="." node_paths=PackedStringArray("_camera2D", "_townScene")]
script = ExtResource("37_vwmma")
_camera2D = NodePath("../museum/Camera2D")
_townScene = NodePath("../museum/CanvasLayer/Town Ui")
